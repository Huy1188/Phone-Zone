"use strict";

const productsRaw = [
  // --- IPHONE ---
  {
    slug: "iphone-14",
    name: "iPhone 14 128GB | Chính hãng VN/A",
    brand: "Apple",
    price: 17990000,
    discount: 15,
    promotion: "Tặng ốp lưng MagSafe",
    specs: [
      { label: "Màn hình", value: "OLED 6.1 inch" },
      { label: "RAM", value: "6GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Pin", value: "3279mAh" },
    ],
  },
  {
    slug: "iphone-15-plus",
    name: "iPhone 15 Plus 128GB",
    brand: "Apple",
    price: 21990000,
    discount: 10,
    promotion: "Trả góp 0%",
    specs: [
      { label: "Màn hình", value: "OLED 6.7 inch" },
      { label: "RAM", value: "6GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Chip", value: "A16 Bionic" },
    ],
  },
  {
    slug: "iphone-16",
    name: "iPhone 16 128GB",
    brand: "Apple",
    price: 22990000,
    discount: 0,
    promotion: "Đặt trước nhận quà",
    specs: [
      { label: "Màn hình", value: "OLED 6.1 inch 90Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Chip", value: "A18 Bionic" },
    ],
  },
  {
    slug: "iphone-16-pro",
    name: "iPhone 16 Pro 256GB",
    brand: "Apple",
    price: 28990000,
    discount: 0,
    promotion: "Thu cũ đổi mới trợ giá 2tr",
    specs: [
      { label: "Màn hình", value: "OLED 6.1 inch 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Khung viền", value: "Titanium" },
    ],
  },
  {
    slug: "iphone-16-pro-max",
    name: "iPhone 16 Pro Max 256GB",
    brand: "Apple",
    price: 32990000,
    discount: 0,
    promotion: "Tặng gói bảo hành VIP",
    specs: [
      { label: "Màn hình", value: "OLED 6.7 inch 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Camera", value: "Tele 5x" },
    ],
  },
  {
    slug: "iphone-17",
    name: "iPhone 17 128GB",
    brand: "Apple",
    price: 23990000,
    discount: 0,
    promotion: "Sắp ra mắt",
    specs: [
      { label: "Màn hình", value: "OLED 6.1 inch 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Chip", value: "A19 Bionic" },
    ],
  },
  {
    slug: "iphone-17-pro",
    name: "iPhone 17 Pro 256GB",
    brand: "Apple",
    price: 30990000,
    discount: 0,
    promotion: "Sắp ra mắt",
    specs: [
      { label: "Màn hình", value: "ProMotion 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Camera", value: "3 camera Pro" },
    ],
  },
  {
    slug: "iphone-17-pro-max",
    name: "iPhone 17 Pro Max 512GB",
    brand: "Apple",
    price: 37990000,
    discount: 0,
    promotion: "Sắp ra mắt",
    specs: [
      { label: "Màn hình", value: "OLED 6.9 inch 120Hz" },
      { label: "RAM", value: "12GB" },
      { label: "Bộ nhớ", value: "512GB" },
      { label: "Khung viền", value: "Titanium" },
    ],
  },
  {
    slug: "iphone-air",
    name: "iPhone Air 256GB",
    brand: "Apple",
    price: 20990000,
    discount: 5,
    promotion: "Thiết kế siêu mỏng",
    specs: [
      { label: "Màn hình", value: "OLED 6.3 inch" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Trọng lượng", value: "Siêu nhẹ" },
    ],
  },
  {
    slug: "iphone-13",
    name: "iPhone 13 128GB | Chính hãng VN/A",
    brand: "Apple",
    price: 15090000,
    discount: 20,
    promotion: "Xả kho giá sốc",
    specs: [
      { label: "Màn hình", value: "OLED 6.1 inch" },
      { label: "RAM", value: "4GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Pin", value: "3240mAh" },
    ],
  },
  {
    slug: "iphone-14-pro",
    name: "iPhone 14 Pro 128GB",
    brand: "Apple",
    price: 23590000,
    discount: 10,
    promotion: "Tặng sạc nhanh 20W",
    specs: [
      { label: "Màn hình", value: "OLED 120Hz" },
      { label: "RAM", value: "6GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Chip", value: "A16 Bionic" },
    ],
  },
  {
    slug: "iphone-15-pro-max",
    name: "iPhone 15 Pro Max 256GB",
    brand: "Apple",
    price: 28990000,
    discount: 8,
    promotion: "Giảm thêm qua VNPAY",
    specs: [
      { label: "Màn hình", value: "6.7 inch 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Khung viền", value: "Titanium" },
    ],
  },

  // --- SAMSUNG ---
  {
    slug: "samsung-galaxy-a17-5g",
    name: "Samsung Galaxy A17 5G",
    brand: "Samsung",
    price: 6290000,
    discount: 10,
    promotion: "Tặng củ sạc",
    specs: [
      { label: "Màn hình", value: "6.6 inch 90Hz" },
      { label: "RAM", value: "6GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Kết nối", value: "5G" },
    ],
  },
  {
    slug: "samsung-galaxy-a26",
    name: "Samsung Galaxy A26",
    brand: "Samsung",
    price: 5690000,
    discount: 5,
    promotion: null,
    specs: [
      { label: "Màn hình", value: "6.5 inch" },
      { label: "RAM", value: "4GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Pin", value: "5000mAh" },
    ],
  },
  {
    slug: "samsung-galaxy-a36",
    name: "Samsung Galaxy A36 5G",
    brand: "Samsung",
    price: 7890000,
    discount: 10,
    promotion: "Mua kèm tai nghe giảm 50%",
    specs: [
      { label: "Màn hình", value: "Super AMOLED 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Pin", value: "5000mAh" },
    ],
  },
  {
    slug: "samsung-galaxy-a56",
    name: "Samsung Galaxy A56 5G",
    brand: "Samsung",
    price: 9390000,
    discount: 5,
    promotion: "Tặng Samsung Care+",
    specs: [
      { label: "Màn hình", value: "Super AMOLED 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Pin", value: "5000mAh sạc nhanh" },
    ],
  },
  {
    slug: "samsung-galaxy-m55",
    name: "Samsung Galaxy M55",
    brand: "Samsung",
    price: 8490000,
    discount: 15,
    promotion: "Độc quyền Online",
    specs: [
      { label: "Màn hình", value: "AMOLED 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Pin", value: "6000mAh" },
    ],
  },
  {
    slug: "samsung-galaxy-s24-fe",
    name: "Samsung Galaxy S24 FE 256GB",
    brand: "Samsung",
    price: 18990000,
    discount: 10,
    promotion: "Trải nghiệm Galaxy AI",
    specs: [
      { label: "Màn hình", value: "Dynamic AMOLED 2X 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Chip", value: "Snapdragon 8 Gen 3" },
    ],
  },
  {
    slug: "samsung-galaxy-s25",
    name: "Samsung Galaxy S25 256GB",
    brand: "Samsung",
    price: 21990000,
    discount: 0,
    promotion: "Đặt trước nhận quà",
    specs: [
      { label: "Màn hình", value: "Dynamic AMOLED 2X 120Hz" },
      { label: "RAM", value: "12GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Camera", value: "3 camera AI" },
    ],
  },
  {
    slug: "samsung-galaxy-s25-ultra",
    name: "Samsung Galaxy S25 Ultra 512GB",
    brand: "Samsung",
    price: 32990000,
    discount: 0,
    promotion: "Tặng ốp lưng cao cấp",
    specs: [
      { label: "Màn hình", value: "QHD+ 120Hz" },
      { label: "RAM", value: "16GB" },
      { label: "Bộ nhớ", value: "512GB" },
      { label: "Camera", value: "200MP AI Pro" },
    ],
  },
  {
    slug: "samsung-galaxy-z-flip-6",
    name: "Samsung Galaxy Z Flip6 256GB",
    brand: "Samsung",
    price: 25990000,
    discount: 15,
    promotion: "Tặng màn hình phụ",
    specs: [
      { label: "Màn hình", value: "Foldable 6.7 inch 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "256GB" },
    ],
  },
  {
    slug: "samsung-galaxy-z-flip-7",
    name: "Samsung Galaxy Z Flip7 256GB",
    brand: "Samsung",
    price: 27990000,
    discount: 0,
    promotion: "Sắp ra mắt",
    specs: [
      { label: "Màn hình", value: "Foldable 6.8 inch 120Hz" },
      { label: "RAM", value: "12GB" },
      { label: "Bộ nhớ", value: "256GB" },
    ],
  },
  {
    slug: "samsung-galaxy-z-fold-7",
    name: "Samsung Galaxy Z Fold7 512GB",
    brand: "Samsung",
    price: 42990000,
    discount: 0,
    promotion: "Sắp ra mắt",
    specs: [
      { label: "Màn hình ngoài", value: "6.5 inch 120Hz" },
      { label: "RAM", value: "16GB" },
      { label: "Bộ nhớ", value: "512GB" },
    ],
  },
  {
    slug: "samsung-galaxy-a55",
    name: "Samsung Galaxy A55 5G",
    brand: "Samsung",
    price: 9690000,
    discount: 5,
    promotion: "Trả góp 0%",
    specs: [
      { label: "Màn hình", value: "Super AMOLED 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Pin", value: "5000mAh" },
    ],
  },
  {
    slug: "samsung-s24-ultra",
    name: "Samsung Galaxy S24 Ultra 256GB",
    brand: "Samsung",
    price: 26990000,
    discount: 10,
    promotion: "Giảm sâu cuối năm",
    specs: [
      { label: "Màn hình", value: "QHD+ 120Hz" },
      { label: "RAM", value: "12GB" },
      { label: "Chip", value: "Snapdragon 8 Gen 3" },
      { label: "Camera", value: "200MP AI" },
    ],
  },

  // --- XIAOMI ---
  {
    slug: "xiaomi-15",
    name: "Xiaomi 15 12GB/256GB",
    brand: "Xiaomi",
    price: 15990000,
    discount: 5,
    promotion: "Mở bán sớm",
    specs: [
      { label: "Màn hình", value: "AMOLED 120Hz" },
      { label: "RAM", value: "12GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Chip", value: "Snapdragon 8 Gen 3" },
    ],
  },
  {
    slug: "xiaomi-13-pro",
    name: "Xiaomi 13 Pro 12GB/256GB",
    brand: "Xiaomi",
    price: 18990000,
    discount: 20,
    promotion: "Xả kho",
    specs: [
      { label: "Màn hình", value: "LTPO AMOLED 120Hz" },
      { label: "RAM", value: "12GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Camera", value: "Leica tuning" },
    ],
  },
  {
    slug: "xiaomi-15-ultra",
    name: "Xiaomi 15 Ultra 16GB/512GB",
    brand: "Xiaomi",
    price: 23990000,
    discount: 0,
    promotion: "Bộ quà tặng nhiếp ảnh",
    specs: [
      { label: "Màn hình", value: "AMOLED 120Hz độ sáng cao" },
      { label: "RAM", value: "16GB" },
      { label: "Bộ nhớ", value: "512GB" },
      { label: "Camera", value: "Cảm biến lớn, zoom quang" },
    ],
  },
  {
    slug: "poco-x7-pro-5g",
    name: "POCO X7 Pro 5G 8GB/256GB",
    brand: "Xiaomi",
    price: 8990000,
    discount: 10,
    promotion: "Chỉ bán Online",
    specs: [
      { label: "Màn hình", value: "AMOLED 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Chip", value: "Snapdragon seri 7" },
    ],
  },
  {
    slug: "xiaomi-poco-x7-5g",
    name: "Xiaomi POCO X7 5G 8GB/128GB",
    brand: "Xiaomi",
    price: 7690000,
    discount: 10,
    promotion: "Flash sale",
    specs: [
      { label: "Màn hình", value: "AMOLED 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Kết nối", value: "5G" },
    ],
  },
  {
    slug: "xiaomi-redmi-note-12",
    name: "Xiaomi Redmi Note 12 8GB/128GB",
    brand: "Xiaomi",
    price: 5290000,
    discount: 15,
    promotion: "Giá rẻ vô địch",
    specs: [
      { label: "Màn hình", value: "AMOLED 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Pin", value: "5000mAh" },
    ],
  },
  {
    slug: "redmi-note-14-pro-plus",
    name: "Redmi Note 14 Pro+ 12GB/256GB",
    brand: "Xiaomi",
    price: 9490000,
    discount: 5,
    promotion: "Bảo hành 18 tháng",
    specs: [
      { label: "Màn hình", value: "AMOLED 120Hz" },
      { label: "RAM", value: "12GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Camera", value: "108MP" },
    ],
  },
  {
    slug: "xiaomi-redmi-note-14-5g",
    name: "Xiaomi Redmi Note 14 5G",
    brand: "Xiaomi",
    price: 6490000,
    discount: 5,
    promotion: null,
    specs: [
      { label: "Màn hình", value: "AMOLED 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Kết nối", value: "5G" },
    ],
  },
  {
    slug: "xiaomi-redmi-note-14",
    name: "Xiaomi Redmi Note 14",
    brand: "Xiaomi",
    price: 5990000,
    discount: 5,
    promotion: null,
    specs: [
      { label: "Màn hình", value: "AMOLED 90Hz" },
      { label: "RAM", value: "6GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Pin", value: "5000mAh" },
    ],
  },
  {
    slug: "xiaomi-14t-pro",
    name: "Xiaomi 14T Pro 12GB/256GB",
    brand: "Xiaomi",
    price: 16990000,
    discount: 10,
    promotion: "Tặng máy lọc không khí",
    specs: [
      { label: "Màn hình", value: "AMOLED 144Hz" },
      { label: "RAM", value: "12GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Chip", value: "Snapdragon 8 series" },
    ],
  },
  {
    slug: "xiaomi-redmi-13-pro-5g",
    name: "Xiaomi Redmi 13 Pro 5G",
    brand: "Xiaomi",
    price: 7290000,
    discount: 10,
    promotion: "Giảm trực tiếp 500k",
    specs: [
      { label: "Màn hình", value: "AMOLED 120Hz" },
      { label: "RAM", value: "8GB" },
      { label: "Bộ nhớ", value: "256GB" },
      { label: "Kết nối", value: "5G" },
    ],
  },
  {
    slug: "xiaomi-redmi-14c",
    name: "Xiaomi Redmi 14C 6GB/128GB",
    brand: "Xiaomi",
    price: 3990000,
    discount: 5,
    promotion: "Pin trâu giá rẻ",
    specs: [
      { label: "Màn hình", value: "LCD 90Hz" },
      { label: "RAM", value: "6GB" },
      { label: "Bộ nhớ", value: "128GB" },
      { label: "Pin", value: "5000mAh" },
    ],
  },
  {
    slug: "xiaomi-14",
    name: "Xiaomi 14 12GB/256GB",
    brand: "Xiaomi",
    price: 19990000,
    discount: 8,
    promotion: "Trả góp 0%",
    specs: [
      { label: "Màn hình", value: "LTPO OLED 120Hz" },
      { label: "RAM", value: "12GB" },
      { label: "Chip", value: "Snapdragon 8 Gen 3" },
      { label: "Camera", value: "Leica" },
    ],
  },
];

module.exports = {
  async up(queryInterface, Sequelize) {
    const brands = await queryInterface.sequelize.query(
      `SELECT brand_id, name FROM Brands`,
      { type: queryInterface.sequelize.QueryTypes.SELECT }
    );
    const categories = await queryInterface.sequelize.query(
      `SELECT category_id, name FROM Categories`,
      { type: queryInterface.sequelize.QueryTypes.SELECT }
    );

    const brandMap = {};
    brands.forEach((b) => (brandMap[b.name] = b.brand_id));
    const phoneCatId =
      categories.find((c) => c.name === "Điện thoại")?.category_id || 1;

    for (const item of productsRaw) {
      const exist = await queryInterface.rawSelect(
        "Products",
        { where: { slug: item.slug } },
        ["product_id"]
      );
      if (!exist) {
        await queryInterface.bulkInsert("Products", [
          {
            name: item.name,
            slug: item.slug,
            description: `<p>${item.name} chính hãng...</p>`,
            specifications: JSON.stringify(item.specs),
            min_price: item.price,
            brand_id: brandMap[item.brand] || brandMap["Apple"],
            category_id: phoneCatId,
            is_hot: true,
            is_active: true,
            discount: item.discount || 0,
            promotion: item.promotion || null,
            created_at: new Date(),
            updated_at: new Date(),
          },
        ]);
      }
    }
  },

  async down(queryInterface, Sequelize) {
    await queryInterface.bulkDelete("Products", null, {});
  },
};
